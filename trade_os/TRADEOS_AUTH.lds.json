{
  "_lds": {
    "uuid": "tradeos-auth-2026-001",
    "type": "ui_component",
    "version": "1.0.0",
    "created": "2026-01-13T22:55:00Z",
    "parent": "tradeos-master-2026-001",
    "phase": 1,
    "sequence": 4
  },
  "core": {
    "name": "TradeOS Authentication",
    "description": "Login, role detection, session management. Demo mode supports instant role switching.",
    "security": "Production would integrate with OAuth2/OIDC. Demo uses simulated auth."
  },
  "demo_users": [
    { "email": "admin@tradeos.demo", "role": "admin", "name": "Alex Admin" },
    { "email": "office@tradeos.demo", "role": "office", "name": "Olivia Office" },
    { "email": "tech@tradeos.demo", "role": "field_tech", "name": "Tyler Tech" },
    { "email": "customer@tradeos.demo", "role": "customer", "name": "Chris Customer" }
  ],
  "react_component": {
    "filename": "Auth.tsx",
    "code": "import React, { createContext, useContext, useState, useCallback, ReactNode } from 'react';\nimport { Lock, Mail, Eye, EyeOff, Shield, Loader2 } from 'lucide-react';\nimport { Role } from './LDSKernel';\n\ninterface User {\n  id: string;\n  email: string;\n  name: string;\n  role: Role;\n  authenticated: boolean;\n  mfa_verified: boolean;\n  gps_enabled: boolean;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  isLoading: boolean;\n  login: (email: string, password: string) => Promise<boolean>;\n  logout: () => void;\n  isAuthenticated: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | null>(null);\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) throw new Error('useAuth must be used within AuthProvider');\n  return context;\n};\n\nconst DEMO_USERS: Record<string, User> = {\n  'admin@tradeos.demo': {\n    id: 'user-001',\n    email: 'admin@tradeos.demo',\n    name: 'Alex Admin',\n    role: 'admin',\n    authenticated: true,\n    mfa_verified: true,\n    gps_enabled: true\n  },\n  'office@tradeos.demo': {\n    id: 'user-002',\n    email: 'office@tradeos.demo',\n    name: 'Olivia Office',\n    role: 'office',\n    authenticated: true,\n    mfa_verified: false,\n    gps_enabled: true\n  },\n  'tech@tradeos.demo': {\n    id: 'user-003',\n    email: 'tech@tradeos.demo',\n    name: 'Tyler Tech',\n    role: 'field_tech',\n    authenticated: true,\n    mfa_verified: false,\n    gps_enabled: true\n  },\n  'customer@tradeos.demo': {\n    id: 'user-004',\n    email: 'customer@tradeos.demo',\n    name: 'Chris Customer',\n    role: 'customer',\n    authenticated: true,\n    mfa_verified: false,\n    gps_enabled: false\n  }\n};\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  \n  const login = useCallback(async (email: string, _password: string): Promise<boolean> => {\n    setIsLoading(true);\n    \n    // Simulate network delay\n    await new Promise(resolve => setTimeout(resolve, 500));\n    \n    const demoUser = DEMO_USERS[email.toLowerCase()];\n    if (demoUser) {\n      setUser(demoUser);\n      setIsLoading(false);\n      return true;\n    }\n    \n    setIsLoading(false);\n    return false;\n  }, []);\n  \n  const logout = useCallback(() => {\n    setUser(null);\n  }, []);\n  \n  return (\n    <AuthContext.Provider value={{\n      user,\n      isLoading,\n      login,\n      logout,\n      isAuthenticated: !!user\n    }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const LoginPage: React.FC<{ onLogin: (role: Role) => void }> = ({ onLogin }) => {\n  const { login, isLoading } = useAuth();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [error, setError] = useState('');\n  \n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    \n    const success = await login(email, password);\n    if (success) {\n      const user = DEMO_USERS[email.toLowerCase()];\n      if (user) onLogin(user.role);\n    } else {\n      setError('Invalid credentials. Use a demo email.');\n    }\n  };\n  \n  const handleQuickLogin = async (userEmail: string) => {\n    setEmail(userEmail);\n    const success = await login(userEmail, 'demo');\n    if (success) {\n      const user = DEMO_USERS[userEmail];\n      if (user) onLogin(user.role);\n    }\n  };\n  \n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-md\">\n        {/* Logo */}\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center gap-3 mb-4\">\n            <div className=\"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg\">\n              <span className=\"text-white font-bold text-2xl\">T</span>\n            </div>\n            <span className=\"text-white font-bold text-3xl\">TradeOS</span>\n          </div>\n          <p className=\"text-slate-400\">Unified Contractor Operations Platform</p>\n        </div>\n        \n        {/* Login Card */}\n        <div className=\"bg-white rounded-2xl shadow-xl p-8\">\n          <div className=\"flex items-center gap-2 mb-6 px-3 py-2 bg-green-50 border border-green-200 rounded-lg\">\n            <Shield className=\"w-4 h-4 text-green-600\" />\n            <span className=\"text-sm text-green-700\">Protected by LDS Kernel V1</span>\n          </div>\n          \n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-slate-700 mb-1\">Email</label>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400\" />\n                <input\n                  type=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none\"\n                  placeholder=\"Enter your email\"\n                />\n              </div>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium text-slate-700 mb-1\">Password</label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400\" />\n                <input\n                  type={showPassword ? 'text' : 'password'}\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full pl-10 pr-12 py-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 outline-none\"\n                  placeholder=\"Enter your password\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600\"\n                >\n                  {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n                </button>\n              </div>\n            </div>\n            \n            {error && (\n              <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm\">\n                {error}\n              </div>\n            )}\n            \n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"w-full py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white font-medium rounded-lg hover:from-orange-600 hover:to-red-700 transition-all disabled:opacity-50 flex items-center justify-center gap-2\"\n            >\n              {isLoading ? (\n                <><Loader2 className=\"w-5 h-5 animate-spin\" /> Signing in...</>\n              ) : (\n                'Sign In'\n              )}\n            </button>\n          </form>\n          \n          {/* Quick Login (Demo) */}\n          <div className=\"mt-8 pt-6 border-t border-slate-100\">\n            <div className=\"text-xs text-slate-500 uppercase tracking-wide mb-3\">Quick Demo Login</div>\n            <div className=\"grid grid-cols-2 gap-2\">\n              {Object.entries(DEMO_USERS).map(([userEmail, userData]) => (\n                <button\n                  key={userEmail}\n                  onClick={() => handleQuickLogin(userEmail)}\n                  className=\"p-3 text-left border border-slate-200 rounded-lg hover:border-orange-300 hover:bg-orange-50 transition-all\"\n                >\n                  <div className=\"text-sm font-medium text-slate-700\">{userData.name}</div>\n                  <div className=\"text-xs text-slate-500 capitalize\">{userData.role.replace('_', ' ')}</div>\n                </button>\n              ))}\n            </div>\n          </div>\n        </div>\n        \n        {/* Footer */}\n        <div className=\"mt-6 text-center text-slate-400 text-sm\">\n          Built with LDS Streaming Architecture\n          <br />\n          <span className=\"text-slate-500\">Â© 2026 Lefebvre Design Solutions</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default { AuthProvider, useAuth, LoginPage };"
  }
}
